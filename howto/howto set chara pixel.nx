
'SET THE COLOR OF A SINGLE PIXEL OF A CHARACTER
'CHARA = CHARA INDEX
'PX,PY = PIXEL COORDS FROM TOP LEFT (0..7)
'PEN = THE COLOR (0..3)
SUB CHARAPSET(CHARA,PX,PY,PEN)
ADDR=$8000+CHARA*16+(PY AND 7)
BIT=PEN AND 1
FOR I=0 TO 1
ROL ADDR,1+PX
POKE ADDR,(PEEK(ADDR) AND 254) OR BIT
ROR ADDR,1+PX
ADDR=ADDR+8
BIT=(PEN AND 2)\2
NEXT I
END SUB

SUB CHARAREAD(CHARA,CX,CY)
ADDR=$8000+CHARA*16
FOR PY=0 TO 7
FOR PX=7 TO 0 STEP -1
CELL CX+PX,CY+PY,(PEEK(ADDR) AND 1)+(PEEK(ADDR+8) AND 1)*2
ROR ADDR,1
ROR ADDR+8,1
NEXT PX
INC ADDR
NEXT PY
END SUB

SUB CHARWRITE(CX,CY,CHARA)
ADDR=$8000+CHARA*16
FILL ADDR,16,0
FOR PY=0 TO 7
FOR PX=0 TO 7
PEN=CELL.C(CX+PX,CY+PY)
ROL ADDR,1
ROL ADDR+8,1
POKE ADDR,PEEK(ADDR) OR (PEN AND 1)
POKE ADDR+8,PEEK(ADDR+8) OR ((PEN AND 2)\2)
NEXT PX
INC ADDR
NEXT PY
END SUB

BG 1
BG COPY 0,0,20,16 TO 0,0
BG 0
BG COPY 0,16,20,16 TO 0,0

SOURCECHAR=10
TARGETCHAR=7

TEXT 1,1,"SET RAND PIXELS TO"
TEXT 1,2,"THIS CHAR AND READ"
TEXT 6,3,"ITS PIXELS TO"
TEXT 6,4,"8X8 BG CELLS"

TEXT 1,8,"THEN COPY"
TEXT 1,9,"BACK TO"

BG 0
ATTR 1
CELL 2,5,SOURCECHAR
CELL 6,12,TARGETCHAR

DO

FOR I=0 TO 100
CALL CHARAPSET(SOURCECHAR,RND(7),RND(7),RND(3))
NEXT I

BG 0
ATTR 1
CALL CHARAREAD(SOURCECHAR,11,7)

CALL CHARWRITE(11,7,TARGETCHAR)

WAIT 40
LOOP


#1:MAIN PALETTES
053F2F00003F2A150000000A003F3C00
003F2A15003F2A15003F2A15003F2A15

#2:MAIN CHARACTERS
00000000000000000000000000000000
FFFFFFFFFFFFFFFF0000000000000000
0000000000000000FFFFFFFFFFFFFFFF
FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF
00000000000000010000000000000001
00000000000000FF00000000000000FF
01010101010101010101010101010101
007E7E18181818000000000000000000
001810004003060C000008183E3F1E0C
00102042010F08080000103C7F3F1808
003E7E381C7E7C000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00007E5A5A7E00000000705050700000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00007E52547400000000705050700000
00006E2A2A7E00000000602020700000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00006E22247400000000602020700000
00007E3A4A7E00000000703040700000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00007E32447400000000703040700000
00007E3A1A7E00000000703010700000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00007E32147400000000703010700000
00004E5A7A1E00000000405070100000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00004E52741400000000405070100000
00007E6A1A7E00000000706010700000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00007E62147400000000706010700000
00003E6A7A7E00000000306070700000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00003E62747400000000306070700000
00007E1A2A2E00000000701020200000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00007E12242400000000701020200000

#3:MAIN BG
00001420000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
08000000000000000000000000000000
00000000000000000000000000000000
00000000000004020502040A00000000
00000000000000000000000000000000
00000000000000000000000000000602
0202060A000000000000000000000000
00000000080000000000000000000000
00000000000004120512041A00000000
00000000000000000402050205020502
05020502050205020502040A00000000
00000000000000000000000000000000
06020212021202120212021202120212
0212060A000000000000000000000000
00000000000000000602021202120212
02120212021202120212060A00000000
00000000000000000000000000000900
06020212021202120212021202120212
0212060A000000000000000000000000
08000000000000000602021202120212
02120212021202120212060A00000000
00000000000004020502040A00000000
06020212021202120212021202120212
0212060A000000000000000000000602
0202060A000000000602021202120212
02120212021202120212060A00000000
00000000000004120512041A00000000
06020212021202120212021202120212
0212060A000000000000000000000000
00000000000000000602021202120212
02120212021202120212060A00000000
00000000000000000000000000000000
04120512051205120512051205120512
0512041A000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00004001410142014301440145014601
47010000000000000000000000000000
00000000000000000000480149014A01
4B014C014D014E014F01000000000000
00000000000000000000000000000000
00005001510152015301540155015601
57010000000000000000000000000000
00000000000000000000580159015A01
5B015C015D015E015F01000000000000
00000000000000000000000000000000
00006001610162016301640165016601
67010000000000000000000000000000
00000000000000000000680169016A01
6B016C016D016E016F01000000000000
00000000000000000000000000000000
00007001710172017301740175017601
77010000000000000000000000000000
00000000000000000000780179017A01
7B017C017D017E017F01000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000

